{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@litalino/flarum-ext-guestengagement/webpack/bootstrap","webpack://@litalino/flarum-ext-guestengagement/webpack/runtime/compat get default export","webpack://@litalino/flarum-ext-guestengagement/webpack/runtime/define property getters","webpack://@litalino/flarum-ext-guestengagement/webpack/runtime/hasOwnProperty shorthand","webpack://@litalino/flarum-ext-guestengagement/webpack/runtime/make namespace object","webpack://@litalino/flarum-ext-guestengagement/external root \"flarum.core.compat['forum/app']\"","webpack://@litalino/flarum-ext-guestengagement/external root \"flarum.core.compat['common/extend']\"","webpack://@litalino/flarum-ext-guestengagement/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@litalino/flarum-ext-guestengagement/external root \"flarum.core.compat['forum/components/PostStream']\"","webpack://@litalino/flarum-ext-guestengagement/external root \"flarum.core.compat['forum/components/SignUpModal']\"","webpack://@litalino/flarum-ext-guestengagement/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@litalino/flarum-ext-guestengagement/external root \"flarum.core.compat['common/components/Button']\"","webpack://@litalino/flarum-ext-guestengagement/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostStream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SignUpModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","/*\n * This file is part of justoverclock/flarum-ext-guestengagement.\n *\n * Copyright (c) 2021 Marco Colia.\n * https://flarum.it\n *\n * For the full copyright and license information, please view the LICENSE.md\n * file that was distributed with this source code.\n */\n\nimport app from 'flarum/forum/app';\n\nimport { extend, override } from 'flarum/common/extend';\n\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport PostStream from 'flarum/forum/components/PostStream';\nimport SignUpModal from 'flarum/forum/components/SignUpModal';\nimport LogInModal from \"flarum/forum/components/LogInModal\";\nimport Button from 'flarum/common/components/Button';\n\napp.initializers.add('litalino/flarum-ext-guestengagement', () => {\n  extend(IndexPage.prototype, 'view', function (vdom) {\n    if (!app.session.user)\n      if (app.forum.attribute('justoverclock-guestengagement.hideHomeBox') === true)\n        if (vdom.children && vdom.children.splice) {\n          /*  Imposta un timeout per far scomparire automaticamente il div*/\n          setTimeout(function () {\n            $('#wrapperengage').fadeOut().empty();\n          }, app.forum.attribute('justoverclock-guestengagement.timeOut'));\n\n          const insert = m(\n            'div',\n            { id: 'wrapperengage' },\n            m('div', { class: 'engagebox' }, [\n              m('p', [\n                m('strong', app.translator.trans('flarum-ext-guestengagement.forum.hello')),\n                m('p'),\n                app.translator.trans('flarum-ext-guestengagement.forum.whenucreate'),\n                app.translator.trans('flarum-ext-guestengagement.forum.uwillreceive'),\n              ]),\n               //app.forum.attribute('justoverclock-guestengagement.hidePostButtom') === true ? '' : buttom_tag_home\n              //if (app.forum.attribute('justoverclock-guestengagement.hideHomeboxButtom') === true)\n                /*m(\n                  'button',\n                  { className: '.SplitDropdown-button Button Button--primary hasIcon', type: 'button', onclick: () => app.modal.show(SignUpModal) },\n                  app.translator.trans('core.forum.header.sign_up_link')\n                ),\n                m(\n                  'i',\n                  app.translator.trans('flarum-ext-guestengagement.forum.or')\n                ),\n                m(\n                  'button',\n                  { className: '.SplitDropdown-button Button Button--primary hasIcon', type: 'button', onclick: () => app.modal.show(LogInModal) },\n                  app.translator.trans('core.forum.header.log_in_link')\n                ),*/\n              //}\n            ])\n          );\n          vdom.children.splice(1, 0, insert);\n        }\n  });\n\n  override(PostStream.prototype, 'view', function (originalView) {\n    // If we're logged in or this feature is disabled, change nothing\n    // about the PostStream\n    if (app.session.user || app.forum.attribute('justoverclock-guestengagement.hidePostBox') !== true) {\n      return originalView();\n    }\n\n    /**\n     * Array of items inside the PostStream.\n     *\n     * @type {import('mithril').Children[]}\n     */\n    const postStreamItems = originalView().children;\n    const buttom_tag = (\n      <>\n      <Button class=\"Button Button--inverted\" onclick={() => app.modal.show(SignUpModal)}>\n      {app.translator.trans('flarum-ext-guestengagement.forum.signupbtn')}\n      </Button>\n      {app.translator.trans('flarum-ext-guestengagement.forum.or')}\n      <Button class=\"Button Button--inverted\" onclick={() => app.modal.show(LogInModal)}>\n        {app.translator.trans('flarum-ext-guestengagement.forum.loginbtn')}\n      </Button>\n      </>\n    );\n\n    const tchange = app.forum.attribute('justoverclock-guestengagement.tchange') ? '<p>'+ app.forum.attribute('justoverclock-guestengagement.tchange') +'</p>' : ''; \n    const BoxTitle = app.forum.attribute('justoverclock-guestengagement.BoxTitle') ? app.forum.attribute('justoverclock-guestengagement.BoxTitle') : app.translator.trans('flarum-ext-guestengagement.forum.post_title');\n\n    const engagementBox = (\n      <div key=\"justoverclock-guestengagement\" id=\"wrapperengage-disc\">\n        <div class=\"engagebox\">\n          {tchange}\n          <span class=\"text\">\n            <i class=\"fas fa-comments\"></i> <strong>{BoxTitle}</strong>\n          </span>\n          <span class=\"button\">\n            { app.forum.attribute('justoverclock-guestengagement.hidePostButtom') === true ? buttom_tag : '' }\n          </span>\n        </div>\n      </div>\n    );\n\n    const newItems = postStreamItems.reduce((items, currentItem) => {\n      let itemList = [...items, currentItem];\n\n      if (currentItem.attrs['data-index'] === (parseInt(app.forum.attribute('justoverclock-guestengagement.xPost')) || 0)) {\n        itemList.push(engagementBox);\n      }\n\n      return itemList;\n    }, []);\n\n    return <div className=\"PostStream\">{newItems}</div>;\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","app","add","extend","IndexPage","vdom","user","attribute","children","splice","setTimeout","$","fadeOut","empty","insert","m","id","class","trans","override","PostStream","originalView","postStreamItems","buttom_tag","'['","Button","onclick","show","SignUpModal","LogInModal","tchange","BoxTitle","engagementBox","newItems","reduce","items","currentItem","itemList","concat","attrs","parseInt","push","className"],"sourceRoot":""}